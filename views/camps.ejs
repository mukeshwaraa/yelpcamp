<% layout('../boilerplate/boilerplate') -%>
<script src="https://apis.mappls.com/advancedmaps/api/<%= mapToken %>/map_sdk?layer=vector&v=3.0&callback=initMap1" defer async></script>

<div id="map" style="margin-bottom: 10px;"></div>        
<% for(camp of campgrounds){ %>
<div class="container" >
<div class="card mb-3 cardForward bg-white-subtle"  >
    <div class="row g-0 p-1">
      <div class="col-md-4">
        <div id="<%= camp.id %>" class="carousel slide">
          <div class="carousel-inner bg-dark-subtle">
              <% camp.images.forEach((img,i) => { %>
                <div class="carousel-item  <%= i == 0? 'active': '' %>">
                <img  src="<%= img.path %>" class="img-fluid mx-auto d-block " alt="..." style="min-height: 50dvh; max-height: 50dvh;" >
                </div>
              <% }) %>
          </div>
          <% if (camp.images.length > 1) { %>
          <button class="carousel-control-prev" type="button" data-bs-target="#<%= camp.id %>" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#<%= camp.id %>" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
          <% } %>
        </div>

      </div>
      <div class="col-md-8 d-flex flex-column " style="cursor: pointer;"  id="changer" too="/camps/<%=camp.id%>">
        <div class="card-body d-flex flex-column justify-content-between">
          <h3 class="card-title align-self-center"><%= camp.name %></h3>
          <p class="card-text "><%= camp.description %></p>
          <p class="card-text"><small class="text-body-secondary"><%= camp.location.fullAddress %></small></p>
         <%  if(camp.reviews.length){ %>
              <p class="starability-result" data-rating="<%- (Math.floor(camp.average)) %>"> </p>
          <%  }%>
        </div>        
      </div>
    </div>
  </div>
</div>
<% } %>
<script>
  const cs = <%- JSON.stringify(campgrounds)%>
</script>
<script src="/js/clustermap.js" crossorigin="anonymous"></script>
